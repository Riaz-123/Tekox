<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Cloud Generator</title>
  </head>
    <style>
      body {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

.sky-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(0deg, #62a0d8 0%, #2178d1 50%, #085cb3 100%);
  z-index: -1;
  transition: filter 0.3s ease;
}

svg {
  width: 0;
  height: 0;
  position: absolute;
}

.cloud-container {
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  filter: url(#filter);
}

.cloud {
  anchor-name: --cloud;
  width: 680px;
  height: 280px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  cursor: grab;
  will-change: transform;
  touch-action: none;
  border: none;
  outline: none;
}

.cloud:active {
  cursor: grabbing;
}

textarea::-webkit-resizer {
  display: none;
}

textarea::-moz-resizer {
  display: none;
}

.resize-handle {
  position: absolute;
  position-anchor: --cloud;
  top: anchor(bottom);
  left: anchor(right);
  transform: translate(-100%, -100%);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
  font-size: 42px;
  color: white;
}

.cloud-container:has(.cloud:hover) ~ .resize-handle {
  opacity: 0.5;
}

.weather-slider-container {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.sun {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 9px;
  width: 14px;
  height: 14px;
  color: white;
  pointer-events: none;
  mix-blend-mode: difference;
}

.storm {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: 9px;
  width: 14px;
  height: 14px;
  color: white;
  pointer-events: none;
  mix-blend-mode: difference;
}

.weather-slider {
  width: 300px;
  padding: 2px;
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(
    to right,
    rgba(255, 255, 255, 0),
    rgba(0, 0, 0, 0.3)
  );
  border-radius: 20px;
  outline: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
}

.weather-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: transparent;
  border: 1px solid white;
  cursor: pointer;
  transition: background 0.1s;
}

.weather-slider::-webkit-slider-thumb:hover {
  background: white;
  transition: none;
}

@keyframes lightning-glow {
  0% {
    opacity: 0.8;
  }

  15%,
  100% {
    opacity: 0;
  }
}

.lightning-glow {
  position: absolute;
  position-anchor: --cloud;
  top: anchor(center);
  left: anchor(center);
  --lightning-x: 0px;
  --lightning-y: 0px;
  transform: translate(
    calc(-50% + var(--lightning-x)),
    calc(-50% + var(--lightning-y))
  );
  width: 33%;
  height: 33%;
  border-radius: 50%;
  background: radial-gradient(closest-side, white, rgba(255, 255, 255, 0));
  pointer-events: none;
  opacity: 0;
  mix-blend-mode: overlay;
  filter: blur(50px);
}

.lightning-glow.flash {
  animation: lightning-glow 0.8s ease-out;
}
    </style>
  <body>
  <div class="sky-background"></div>

<svg xmlns="http://www.w3.org/2000/svg">
  <filter id="filter" x="-50%" y="-50%" width="200%" height="200%" style="color-interpolation-filters:sRGB">
    <feTurbulence type="fractalNoise" seed="462" baseFrequency="0.011" numOctaves="5" result="noise1" />
    <feTurbulence type="fractalNoise" seed="462" baseFrequency="0.011" numOctaves="2" result="noise2" />
    <feGaussianBlur in="SourceGraphic" stdDeviation="20" />
    <feDisplacementMap in="blur1" scale="100" in2="noise1" result="cloud1" />
    <feFlood id="shadow2" flood-color="rgb(215,215,215)" flood-opacity="0.2" />
    <feComposite operator="in" in2="SourceGraphic" />
    <feOffset dx="-10" dy="-3" />
    <feMorphology radius="20" />
    <feGaussianBlur stdDeviation="20" />
    <feDisplacementMap scale="100" in2="noise1" result="cloud2" />
    <feFlood id="shadow3" flood-color="rgb(66,105,146)" flood-opacity="0.2" />
    <feComposite operator="in" in2="SourceGraphic" />
    <feOffset dx="-10" dy="40" />
    <feMorphology radius="0 40" />
    <feGaussianBlur stdDeviation="20" />
    <feDisplacementMap scale="80" in2="noise2" result="cloud3" />
    <feFlood id="shadow4" flood-color="rgb(0,0,0)" flood-opacity="0.4" />
    <feComposite operator="in" in2="SourceGraphic" />
    <feOffset dx="20" dy="60" />
    <feMorphology radius="0 65" />
    <feGaussianBlur stdDeviation="30" />
    <feDisplacementMap scale="100" in2="noise2" result="cloud4" />

    <feFlood id="shadow5" flood-color="rgb(0,0,0)" flood-opacity="0.4" />
    <feComposite operator="in" in2="SourceGraphic" />
    <feOffset dx="20" dy="70" />
    <feMorphology radius="0 200" />
    <feGaussianBlur stdDeviation="30" />
    <feDisplacementMap scale="100" in2="noise2" result="cloud5" />

    <feMerge>
      <feMergeNode in="cloud1" id="feMergeNode954" />
      <feMergeNode in="cloud2" id="feMergeNode956" />
      <feMergeNode in="cloud3" id="feMergeNode958" />
      <feMergeNode in="cloud4" id="feMergeNode960" />
      <feMergeNode in="cloud5" id="feMergeNode962" />
    </feMerge>
  </filter>
</svg>

<div class="cloud-container">
  <textarea class="cloud" readonly></textarea>
</div>
<div class="lightning-glow"></div>

<div class="resize-handle">â—ž</div>

<div class="weather-slider-container">
  <svg class="sun" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 20 20">
    <circle cx="10" cy="10" r="4" stroke-width="0" fill="currentColor"></circle>
    <line x1="10" y1="2" x2="10" y2="3.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="15.657" y1="4.343" x2="14.596" y2="5.404" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="18" y1="10" x2="16.5" y2="10" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="15.657" y1="15.657" x2="14.596" y2="14.596" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="10" y1="18" x2="10" y2="16.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="4.343" y1="15.657" x2="5.404" y2="14.596" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="2" y1="10" x2="3.5" y2="10" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
    <line x1="4.343" y1="4.343" x2="5.404" y2="5.404" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-color="color-2"></line>
  </svg>
  <svg class="storm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor">
    <path d="M96 416a16 16 0 01-14.3-23.16l24-48a16 16 0 0128.62 14.32l-24 48A16 16 0 0196 416zM120 480a16 16 0 01-14.3-23.16l16-32a16 16 0 0128.62 14.32l-16 32A16 16 0 01120 480zM376 416a16 16 0 01-14.3-23.16l24-48a16 16 0 0128.62 14.32l-24 48A16 16 0 01376 416zM400 480a16 16 0 01-14.3-23.16l16-32a16 16 0 0128.62 14.32l-16 32A16 16 0 01400 480z" />
    <path d="M405.84 136.9a151.25 151.25 0 00-47.6-81.9 153 153 0 00-241.81 51.86C60.5 110.16 16 156.65 16 213.33 16 272.15 63.91 320 122.8 320h66.31l-12.89 77.37A16 16 0 00192 416h32v64a16 16 0 0029 9.3l80-112a16 16 0 00-13-25.3h-27.51l8-32h103.84a91.56 91.56 0 001.51-183.1z" />
  </svg>
  <input type="range" min="0" max="100" value="0" class="weather-slider" id="weatherSlider">
</div>
    <script>
      const cloud = document.querySelector(".cloud");
let isDragging = false;
let offsetX = 0;
let offsetY = 0;
let startMouseX, startMouseY;

cloud.addEventListener("mousedown", (e) => {
  const rect = cloud.getBoundingClientRect();
  const scrollbarWidth = cloud.offsetWidth - cloud.clientWidth;
  const resizeHandleSize = 50;

  if (e.clientX > rect.right - scrollbarWidth - resizeHandleSize) return;
  if (e.clientY > rect.bottom - resizeHandleSize) return;

  isDragging = true;
  startMouseX = e.clientX;
  startMouseY = e.clientY;
});

document.addEventListener("mousemove", (e) => {
  if (!isDragging) return;

  const deltaX = e.clientX - startMouseX;
  const deltaY = e.clientY - startMouseY;

  cloud.style.transform = `translate(calc(-50% + ${
    offsetX + deltaX
  }px), calc(-50% + ${offsetY + deltaY}px))`;
});

document.addEventListener("mouseup", (e) => {
  if (isDragging) {
    const deltaX = e.clientX - startMouseX;
    const deltaY = e.clientY - startMouseY;
    offsetX += deltaX;
    offsetY += deltaY;
  }
  isDragging = false;
});

const weatherSlider = document.getElementById("weatherSlider");
const skyBackground = document.querySelector(".sky-background");
const shadow2 = document.getElementById("shadow2");
const shadow3 = document.getElementById("shadow3");
const shadow4 = document.getElementById("shadow4");
const shadow5 = document.getElementById("shadow5");
const lightningGlow = document.querySelector(".lightning-glow");

let lightningInterval = null;

function lerp(start, end, t) {
  return start + (end - start) * t;
}

function updateWeather(value) {
  const t = value / 100;

  if (value == 100) {
    if (!lightningInterval) {
      scheduleLightning();
    }
  } else {
    if (lightningInterval) {
      clearTimeout(lightningInterval);
      lightningInterval = null;
    }
  }

  const saturation = lerp(100, 30, t);
  const brightness = lerp(100, 50, t);
  skyBackground.style.filter = `saturate(${saturation}%) brightness(${brightness}%)`;

  const shadow2Opacity = lerp(0, 0.4, t);
  shadow2.setAttribute("flood-opacity", shadow2Opacity);

  const shadow3Opacity = lerp(0.1, 0.4, t);
  shadow3.setAttribute("flood-opacity", shadow3Opacity);

  const shadow4Opacity = lerp(0.2, 0.6, t);
  shadow4.setAttribute("flood-opacity", shadow4Opacity);

  const shadow5Opacity = lerp(0.2, 0.7, t);
  shadow5.setAttribute("flood-opacity", shadow5Opacity);
}

weatherSlider.addEventListener("input", (e) => {
  updateWeather(e.target.value);
});

updateWeather(0);

function triggerLightning() {
  const cloudRect = cloud.getBoundingClientRect();

  const randomX = (Math.random() - 0.5) * (cloudRect.width * 0.6);
  const randomY = Math.random() * (cloudRect.height * 0.3);

  lightningGlow.style.setProperty("--lightning-x", `${randomX}px`);
  lightningGlow.style.setProperty("--lightning-y", `${randomY}px`);

  lightningGlow.classList.remove("flash");
  void lightningGlow.offsetWidth;
  lightningGlow.classList.add("flash");

  setTimeout(() => {
    lightningGlow.classList.remove("flash");
  }, 800);
}

function scheduleLightning() {
  const randomDelay = 300 + Math.random() * 1200;

  lightningInterval = setTimeout(() => {
    triggerLightning();
    scheduleLightning();
  }, randomDelay);
}
    </script>

  </body>
  
</html>
