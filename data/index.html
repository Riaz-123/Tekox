<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Number Lookup</title>
  <style>
    /* --- Hacker Theme CSS --- */
    @keyframes blink {
      50% { opacity: 0; }
    }

    body {
      font-family: 'Courier New', Courier, monospace;
      background-color: #0d0208; /* Dark background */
      color: #00ff41; /* Green text */
      text-shadow: 0 0 5px #00ff41;
      padding: 20px;
    }

    h2 {
      border-right: .15em solid #00ff41;
      white-space: nowrap;
      overflow: hidden;
      animation: blink 1s step-end infinite;
      display: inline-block;
      margin-bottom: 20px;
    }

    input, button, a.btn {
      background: transparent;
      border: 1px solid #00ff41;
      color: #00ff41;
      padding: 12px;
      margin: 5px;
      font-family: inherit;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
      transition: background-color 0.3s, color 0.3s;
      text-decoration: none; /* For the <a> tag */
      display: inline-block; /* For the <a> tag */
    }

    input {
      box-shadow: none; /* Input field looks better without a glow */
    }

    input::placeholder {
      color: rgba(0, 255, 65, 0.5);
    }

    button:hover, a.btn:hover {
      background-color: #00ff41;
      color: #0d0208;
    }

    .card {
      background: transparent;
      border: 1px dashed #00ff41;
      border-radius: 0;
      padding: 15px;
      margin: 15px 0;
      box-shadow: none;
    }

    .head {
      font-weight: bold;
      color: #ffffff; /* Make keys white for contrast */
      text-shadow: 0 0 5px #ffffff;
    }

    #results p {
      margin: 5px 0;
    }

    .error-msg {
      color: #ff0000; /* Red for errors */
      text-shadow: 0 0 5px #ff0000;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2><span style="font-size: 1.5em;">ðŸ“±</span> Live SIM DATA  </h2>
  <br>
  <input type="text" id="num" placeholder="Enter target number...">
  <button onclick="searchNumber()">SEARCH</button>
  
  <a href="https://whatsapp.com/channel/0029Vaghq2Q2ER6qcRhijo0S" target="_blank" class="btn">Join for Updates</a>

  <div id="results"></div>

  <script>
    let loadingInterval;

    function startLoadingAnimation(element) {
      let text = "ACCESSING DATABASE..  PLEASE WAIT...";
      let i = 0;
      element.innerHTML = "";
      loadingInterval = setInterval(() => {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
        } else {
          element.innerHTML = ""; // Reset and loop
          i = 0;
        }
      }, 100);
    }

    function stopLoadingAnimation() {
      clearInterval(loadingInterval);
    }

    async function searchNumber() {
      const num = document.getElementById("num").value.trim();
      const resultsDiv = document.getElementById("results");
      
      stopLoadingAnimation(); // Stop any previous animations
      startLoadingAnimation(resultsDiv);

      if (!num) {
        stopLoadingAnimation();
        resultsDiv.innerHTML = `<p class="error-msg">[!] ERROR: Input field cannot be empty. Please provide a number.</p>`;
        return;
      }

      try {
        // call your PHP API
        const response = await fetch(`https://www.3patticenter.com/famofc/api/database.php?num=${encodeURIComponent(num)}`);
        const data = await response.json();

        stopLoadingAnimation(); // Stop loading animation before showing results

        if (data.status !== "success") {
          resultsDiv.innerHTML = `<p class="error-msg">[!] ${data.message}</p>`;
          return;
        }

        // show results
        resultsDiv.innerHTML = `<h3>[+] Records Found: ${data.data.length}</h3>`;
        data.data.forEach(record => {
          let card = `<div class="card">`;
          for (let key in record) {
            // Capitalize the key for better readability
            let formattedKey = key.charAt(0).toUpperCase() + key.slice(1).replace(/_/g, ' ');
            card += `<p><span class="head">${formattedKey}:</span> ${record[key]}</p>`;
          }
          card += `</div>`;
          resultsDiv.innerHTML += card;
        });

      } catch (error) {
        stopLoadingAnimation();
        resultsDiv.innerHTML = `<p class="error-msg">[!] NETWORK ERROR: Could not connect to the server. ${error.message}</p>`;
      }
    }
  </script>
</body>
</html>
